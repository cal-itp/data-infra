version: 2

models:
  - name: stg_gtfs_guidelines__fact_daily_transitland_url_check
    description: '{{ doc("transitland_url_check_table") }}'
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - dt
            - calitp_itp_id
            - url
    columns:
      - name: dt
      - name: url
      - name: url_type
      - name: calitp_itp_id
        description: '{{ doc("column_calitp_itp_id") }}'
      - name: calitp_url_number
        description: '{{ doc("column_calitp_url_number") }}'
      - name: transitland_status
        description: A value of either `present` or `missing`
      - name: transitland_public_web_url
  - name: stg_gtfs_guidelines__schedule_feed_on_transitland
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - date
            - calitp_itp_id
            - calitp_url_number
    columns:
      - name: date
      - name: calitp_itp_id
      - name: calitp_url_number
      - name: calitp_agency_name
      - name: check
      - name: feature
      - name: status
        tests:
          - not_null
  - name: stg_gtfs_guidelines__vehicle_positions_feed_on_transitland
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - date
            - calitp_itp_id
            - calitp_url_number
    columns:
      - name: date
      - name: calitp_itp_id
      - name: calitp_url_number
      - name: calitp_agency_name
      - name: check
      - name: feature
      - name: status
        tests:
          - not_null
  - name: stg_gtfs_guidelines__trip_updates_feed_on_transitland
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - date
            - calitp_itp_id
            - calitp_url_number
    columns:
      - name: date
      - name: calitp_itp_id
      - name: calitp_url_number
      - name: calitp_agency_name
      - name: check
      - name: feature
      - name: status
        tests:
          - not_null
  - name: stg_gtfs_guidelines__service_alerts_feed_on_transitland
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - date
            - calitp_itp_id
            - calitp_url_number
    columns:
      - name: date
      - name: calitp_itp_id
      - name: calitp_url_number
      - name: calitp_agency_name
      - name: check
      - name: feature
      - name: status
        tests:
          - not_null
  - name: stg_gtfs_guidelines__shapes_for_all_trips
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - date
            - calitp_itp_id
            - calitp_url_number
    columns:
      - name: date
      - name: calitp_itp_id
      - name: calitp_url_number
      - name: calitp_agency_name
      - name: check
      - name: feature
      - name: status
        tests:
          - not_null
  - name: stg_gtfs_guidelines__shapes_valid
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - date
            - calitp_itp_id
            - calitp_url_number
    columns:
      - name: date
      - name: calitp_itp_id
      - name: calitp_url_number
      - name: calitp_agency_name
      - name: check
      - name: feature
      - name: status
        tests:
          - not_null
