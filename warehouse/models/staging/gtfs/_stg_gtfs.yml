version: 2

models:
  - name: stg_gtfs_schedule__download_outcomes
    description: Outcomes from download attempts of GTFS schedule data.
    columns:
      - name: dt
      - &key
        name: key
        description: |
          Synthetic key constructed from `base64_url` and `ts`.
        tests:
          - unique
          - not_null
      - name: name
      - name: url
      - name: feed_type
      - name: config_extracted_at
      - name: schedule_url_for_validation
      - name: download_success
      - name: download_exception
      - name: download_response_code
      - name: download_response_headers
      - name: base64_url
      - name: ts
  - name: stg_gtfs_schedule__unzip_outcomes
    description: Outcomes from unzip attempts on downloaded GTFS schedule data.
    columns:
      - name: dt
      - *key
      - name: name
      - name: url
      - name: feed_type
      - name: config_extracted_at
      - name: unzip_success
      - name: unzip_exception
      - name: zipfile_extract_md5hash
        description: |
          MD5 hash for the zipfile being unzipped.
      - name: zipfile_files
        description: |
          List (array) of filenames found inside the zipfile being unzipped.
      - name: zipfile_dirs
        description: |
          List (array) of directories found inside the zipfile being unzipped.
          If more than one directory is present, the zipfile is not valid for our pipeline.
      - name: base64_url
      - name: ts
