version: 2
exposures:
  - name: which_validator_codes_does_our_spreadsheet_cover_
    label: Which validator codes does our spreadsheet cover?
    description: "### Visualization: Table\n\nChecks that the data from this spreadsheet\
      \ includes codes we see in validator output:\n\nhttps://docs.google.com/spreadsheets/d/1GDDaDlsBPCYn3dtYPSABnce9ns3ekJ8Jzfgyy56lZz4/edit#gid=0\n\
      \n#### Query\n\n```\nSELECT * FROM (\n    SELECT CASE WHEN in_spreadsheet AND\
      \ in_validator_reports THEN \"both\" WHEN in_validator_reports THEN \"data\"\
      \ ELSE \"spreadsheet\" END AS in_data, * EXCEPT(in_spreadsheet, in_validator_reports)\
      \ FROM (\n        SELECT\n          coalesce(t1.name, t2.code) AS code\n   \
      \       , t1.name IS NOT NULL AS in_spreadsheet\n          , t2.code IS NOT\
      \ NULL AS in_validator_reports\n          , t1.type AS spreadsheet_severity,\
      \ t2.severity AS validator_severity\n          , t1.* EXCEPT (name, type)\n\
      \        FROM `cal-itp-data-infra.views.validation_code_descriptions` t1\n \
      \       FULL JOIN (SELECT DISTINCT code, severity FROM `cal-itp-data-infra.test_views.validation_codes`)\
      \ t2\n         ON t1.name=t2.code\n    )\n)\n[[WHERE in_data=(in_data)]]\nORDER\
      \ BY LOWER(code)\n```\n\n#### Metadata\n\nMetabase ID: __3__\n\nCreated On:\
      \ __2021-06-14T20:28:30.048424Z__"
    type: analysis
    url: https://dashboards.calitp.org/card/3
    maturity: medium
    owner:
      name: Administrator of Metabase
      email: general+cal-itp@jarv.us
    depends_on: []
    config:
      meta:
        last_used_at: '2024-09-20T17:54:54.131902Z'
