version: 2
exposures:
  - name: capital_expenditures_by_domain
    label: Capital Expenditures by Domain
    description: "### Visualization: Bar\n\nNo description provided in Metabase\n\n\
      #### Query\n\n```\nWITH facilities AS (\nSELECT\n  `mart_ntd_funding_and_expenses.fct_capital_expenditures_time_series_facilities`.`agency_name`\
      \ AS `agency_name`,\n  `mart_ntd_funding_and_expenses.fct_capital_expenditures_time_series_facilities`.`ntd_id`\
      \ AS `ntd_id`,\n  `mart_ntd_funding_and_expenses.fct_capital_expenditures_time_series_facilities`.`state`\
      \ AS `state`,\n  `mart_ntd_funding_and_expenses.fct_capital_expenditures_time_series_facilities`.`year`\
      \ AS `year`,\n  `mart_ntd_funding_and_expenses.fct_capital_expenditures_time_series_facilities`.`mode`\
      \ AS `mode`,\n  `mart_ntd_funding_and_expenses.fct_capital_expenditures_time_series_facilities`.`facilities`\
      \ AS `total`,\n  `mart_ntd_funding_and_expenses.fct_capital_expenditures_time_series_facilities`.`caltrans_district_current`\
      \ AS `caltrans_district_current`,\n  'facilities' AS `domain`,\nFROM\n  `mart_ntd_funding_and_expenses.fct_capital_expenditures_time_series_facilities`\n\
      WHERE state = 'CA'\n  ),\nother AS (\nSELECT\n  `mart_ntd_funding_and_expenses.fct_capital_expenditures_time_series_other`.`agency_name`\
      \ AS `agency_name`,\n  `mart_ntd_funding_and_expenses.fct_capital_expenditures_time_series_other`.`ntd_id`\
      \ AS `ntd_id`,\n  `mart_ntd_funding_and_expenses.fct_capital_expenditures_time_series_other`.`state`\
      \ AS `state`,\n  `mart_ntd_funding_and_expenses.fct_capital_expenditures_time_series_other`.`year`\
      \ AS `year`,\n  `mart_ntd_funding_and_expenses.fct_capital_expenditures_time_series_other`.`mode`\
      \ AS `mode`,\n  `mart_ntd_funding_and_expenses.fct_capital_expenditures_time_series_other`.`other`\
      \ AS `total`,\n  `mart_ntd_funding_and_expenses.fct_capital_expenditures_time_series_other`.`caltrans_district_current`\
      \ AS `caltrans_district_current`,\n  'other' AS `domain`,\nFROM\n  `mart_ntd_funding_and_expenses.fct_capital_expenditures_time_series_other`\n\
      WHERE state = 'CA'\n  ),\n  rolling_stock AS (\nSELECT\n  `mart_ntd_funding_and_expenses.fct_capital_expenditures_time_series_rolling_stock`.`agency_name`\
      \ AS `agency_name`,\n  `mart_ntd_funding_and_expenses.fct_capital_expenditures_time_series_rolling_stock`.`ntd_id`\
      \ AS `ntd_id`,\n  `mart_ntd_funding_and_expenses.fct_capital_expenditures_time_series_rolling_stock`.`state`\
      \ AS `state`,\n  `mart_ntd_funding_and_expenses.fct_capital_expenditures_time_series_rolling_stock`.`year`\
      \ AS `year`,\n  `mart_ntd_funding_and_expenses.fct_capital_expenditures_time_series_rolling_stock`.`mode`\
      \ AS `mode`,\n  `mart_ntd_funding_and_expenses.fct_capital_expenditures_time_series_rolling_stock`.`rolling_stock`\
      \ AS `total`,\n  `mart_ntd_funding_and_expenses.fct_capital_expenditures_time_series_rolling_stock`.`caltrans_district_current`\
      \ AS `caltrans_district_current`,\n  'rolling_stock' AS `domain`,\nFROM\n  `mart_ntd_funding_and_expenses.fct_capital_expenditures_time_series_rolling_stock`\n\
      WHERE state = 'CA'\n  )\nSELECT * FROM facilities\nUNION ALL\nSELECT * FROM\
      \ other\nUNION ALL\nSELECT * FROM rolling_stock\n```\n\n#### Metadata\n\nMetabase\
      \ ID: __3605__\n\nCreated On: __2025-04-23T17:48:14.437394Z__"
    type: analysis
    url: https://dashboards.calitp.org/card/3605
    maturity: medium
    owner:
      name: Charlie Costanzo
      email: charlie.c@jarv.us
    depends_on: []
    config:
      meta:
        average_query_time: '0:00.484'
        last_used_at: '2025-07-09T05:02:54.762432Z'
