operator: operators.ExternalTable
bucket: "{{ env_var('CALITP_BUCKET__SENTRY_LOGS') }}"
suffix_bucket: true
source_objects:
  - "*.jsonl.gz"
destination_project_dataset_table: "external_sentry_error_logs.events"
source_format: NEWLINE_DELIMITED_JSON
use_bq_client: true
hive_options:
  mode: CUSTOM
  source_uri_prefix: "events/{dt:DATE}/{ts:TIMESTAMP}/"
schema_fields:
  - name: id
    type: STRING
  - name: event_type
    type: STRING
  - name: groupid
    type: STRING
  - name: eventid
    type: STRING
  - name: projectid
    type: JSON
  - name: message
    type: STRING
  - name: title
    type: STRING
  - name: location
    type: STRING
  - name: culprit
    type: STRING
  - name: user
    mode: NULLABLE
    type: STRING
  - name: tags
    type: JSON
  - name: platform
    type: STRING
  - name: datecreated
    type: STRING
  - name: crashfile
    mode: NULLABLE
    type: STRING
