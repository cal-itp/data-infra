---
jupytext:
  cell_metadata_filter: -all
  formats: md:myst
  text_representation:
    extension: .md
    format_name: myst
    format_version: 0.13
    jupytext_version: 1.10.3
kernelspec:
  display_name: Python 3 (ipykernel)
  language: python
  name: python3
---
(metabase)=
# Business Insights & Dashboards
## Introduction to Metabase
Metabase is Cal-ITP's dashboarding tool, and it's where data generated by Cal-ITP's data
pipeline can be turned in to graphs, tables, and robust dashboards.

This page will provide you with some general Metabase resources, as well as guidance on how
Metabase is best utilized for the Cal-ITP project.

Make sure you have access to Metabase [here](https://dashboards.calitp.org/).

### Overview

If you have never used Metabase before, there are a few important terms:

* **Question:** A single table or graph, created by you with either SQL or Metabase's point-and-click UI.
* **Dashboard:** A group of questions that work together to support holistic data exploration and help inform decisions.
* **Collection:** Essentially, a "folder" for us to put relevant questions and dashboards into.

You can also incorporate filters into your questions and dashboards, specify custom
click behavior in your dashboards, and more.

### General Metabase Resources

One reason Metabase is awesome is because of its [learn](https://www.metabase.com/learn/) section,
which is full of useful tutorials on how to work with Metabase questions, dashboards, and more.

Below are some helpful articles from Metabase's learn section:

* Getting Started
    * [Getting Started with Metabase](https://www.metabase.com/learn/getting-started/getting-started.html) (Video included!)
    * [A Tour of Metabase](https://www.metabase.com/learn/getting-started/tour-of-metabase.html)
* Asking Questions
    * [Create Charts with Explorable Data](https://www.metabase.com/learn/questions/drill-through.html)
    * [Custom Expressions in the Notebook Editor](https://www.metabase.com/learn/questions/custom-expressions.html)
* Working with SQL
    * [Best Practices for Writing SQL Queries](https://www.metabase.com/learn/sql-questions/sql-best-practices.html)
    * [Create Filter Widgets for Charts Using SQL Variables](https://www.metabase.com/learn/sql-questions/sql-variables.html) (Video included!)
    * [Field Filters](https://www.metabase.com/learn/sql-questions/field-filters.html)
* Visualizing Data
    * [Which Chart Should You Use?](https://www.metabase.com/learn/visualization/chart-guide.html)
    * [Everything You Can Do with the Table Visualization](https://www.metabase.com/learn/visualization/table.html)
    * [Visualizing Data with Maps](https://www.metabase.com/learn/visualization/maps.html) (Video included!)
* Building Dashboards
    * [Best Practices for BI Dashboards](https://www.metabase.com/learn/dashboards/bi-dashboard-best-practices.html)
    * [Linking Filters](https://www.metabase.com/learn/dashboards/linking-filters.html)

## Metabase at Cal-ITP

### Cal-ITP Collections

Cal-ITP's Metabase instance makes use of collections to keep questions and dashboards
organized. Additionally, these collections have specific read/write permissions, in order
to ensure only certain users are able to edit certain questions. This approach helps separate
concerns of question/dashboard ownership and responsibility. As of this writing, there are
three primary collections:

* **Cal-ITP Dashboards:** Read-only dashboards, editable only by Cal-ITP analysts
* **Cal-ITP Commons:** Permission-less sharing of questions and dashboards
* **Cal-ITP Development:** Analyst-only collection for works in progress

In general, the **Cal-ITP Dashboards** collection is used for what we might consider
"complete" or "official" sources of truth for the work done by Cal-ITP analysts.

If you are analyst, the 2x2 matrix below should help you understand which
collection you should be operating in for a given piece of work:

![Collection Matrix](https://raw.githubusercontent.com/cal-itp/data-infra/main/docs/warehouse/assets/which_collection_to_use.png)

### Cal-ITP Dashboards Conventions

The Cal-ITP Dashboards collection has a few specific conventions that you
should follow in order to help keep your work maintainable and navigable
by your teammates.

#### Hierarchy

In the Cal-ITP Dashboards collection, you will notice that all of the dashboards
are pinned.

Within this collection, there are sub-collections - one sub-collection for each
dashboard. For sub-collection naming, if the dashboard is called "GTFS Schedule
Dashboard", the sub-collection should be called "GTFS Schedule Dashboard Questions".
Keeping with this example, all of the questions that power the GTFS Schedule Dashboard
should be kept in the GTFS Schedule Dashboard sub-collection.

#### Question Title Format

Dashboards can feature a lot of questions! In order to keep questions organized in
their sub-collections, we use a double pipe (`||`) to separate the section of the
dashboard from the question name. Having both the dashboard section and the question
name available available in the title of the question makes for a manageable rendering
of all questions in a dashboard's sub-collection of questions.

A question naming example would be something like this: if there was a "Summary" section
of your dashboard, and you had a question that specified the start date of that dashboard,
then your title would be something like `Summary || Dashboard Start Date`.

## Video - Using Metabase Dashboards

<div style="position: relative; padding-bottom: 62.5%; height: 0;"><iframe src="https://www.loom.com/embed/1dc0c085b12b4848a52523ef34397f71" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"></iframe></div>
