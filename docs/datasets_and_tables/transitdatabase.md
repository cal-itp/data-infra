# Transit Database

The Cal-ITP Airtable Transit Database stores key relationships about how transit services are organized and operated in California as well as how well they are performing. See Evan or Hunter to get a link and gain access.

We have chosen to group and maintain the tables in the Database as follows:

| **Table Set** | **Description** | **Data Maintainer** |
| :------------ | :-------------- | :------------------ |
| [**Transit Services Tables**](#transit-services-tables) | Defines key organizational relationships and properties. Organizations, geography, funding programs,  transit services, service characteristics, transit datasets such as GTFS, and the intersection between transit datasets and services. | *Elizabeth*<br>Evan handling uptake to warehouse |
| [**Transit Data Assessment Tables**](#transit-data-assessment-tables) | Articulates data performance metrics and assessments. Structure still a `WIP`| *Elizabeth*<br>*Evan* handling uptake to warehouse<br>*Olivia* a key User Advocate. |
| [**Transit Stack Tables**](#transit-stack-tables) | Defines operational setups at transit provider organizations. Defines relationships between vendor organizations, transit provider and operator organizations, products, contracts to provide products, transit stack components, and how they relate to one-another. Structure still a `WIP` and needs to catch up with the above. | *Elizabeth*<br>No warehouse uptake for time being. |

While `organizations` and `services` are central to many of the tables, we have chosen to maintain them as part of the Transit Services Tables cluster which will be referenced by the other two.

## Airtable things

### Primary Keys

Airtable forces the use of the left-most field as the primary key of the database: the field that must be referenced in other tables, similar to a VLOOKUP in a spreadsheet. Unlike many databases, Airtable doesn't enforce uniqueness in the values of the primary key field.  Instead, it assigns it an underlying and mostly hidden unique [`RECORD ID`](https://support.airtable.com/hc/en-us/articles/360051564873-Record-ID), which can be exposed by creating a formula field to reference it.

For the sake of this documentation, we've noted the [`Primary Field`](https://support.airtable.com/hc/en-us/articles/202624179-The-primary-field), which is not guaranteed to be unique. Some tables additionally expose the unique [`RECORD ID`](https://support.airtable.com/hc/en-us/articles/360051564873-Record-ID) as well.

### Full Documentation of Fields

AirTable does not currently have an effective mechanism to programmaticaly download your data schema (they have currently paused issuing keys to their metadata API). Rather than manually type-out and export each individual field definition from AirTable, please see the [AirTable-based documentation of fields](https://airtable.com/appPnJWrQ7ui4UmIl/api/docs) which is produced as a part of their API documentation. Note that you must be authenticated with access to the base to reach this link.

## Related Data

The data in the Airtable Transit Database is distinct but related to the following data:

- [GTFS Schedule Quality Assessment Airflow pipelines](/airflow/static-schedule-pipeline) results in the [warehouse](/warehouse/overview)
- [GTFS Schedules Datasets](gtfs_schedule)

Currently neither of the above processes or datasets either rely on or contribute back to the Airflow Transit Database – this is a work in progress.  Rather, they rely on the list of transit datasets in the file [`agencies.yml`](https://github.com/cal-itp/data-infra/tree/main/airflow/data/agencies.yml) to dictate what datasets to download and assess.

## Transit Services Tables

| **Name**<br>*Key(s)*| **Description** |
| :------------- |  :-------------- |
| `organizations`<br><br>*Primary Field*: `Name` | Records are legal organizations, including companies, governmental bodies, or non-profits. <br><br>Table includes information on organizational properties (i.e. locale, type) as well as summarizations of its various relationships (e.g. `services` for a transit provider, or `products` for a vendor). <br> <br>An organization MAY:<br><ul><li>*manage* one more more `services`</li><li>*operate* one more `services`</li><li>*own* one more `contracts`</li><li>*hold* one more `contracts`</li><li>*sell* one more `products`</li><li>*consume* one more `gtfs datasets`</li><li>*produce* one more `gtfs datasets`</li></ul>
| `services`<br><br>*Primary Field*: `Name` | Each record defines a transit service and its properties.<br><br>While there are a small number of exceptions (e.g. Solano Express, which is jointly managed by Solano and Napa), generally each transit service is managed by a single organization. Transit services are differentiated from each other by variation (or the potentiality of variation) in one or more of the following:<ul><li>operator `organization` such as City Staff vs a contracted service,<li>`rider requirements` such as ADA Paratransit eligibility, senior status, school trips, etc.</li><li>Operational characteristics such as reservations, on-demand vs fixed-route, service frequencies, and mode</li>Business processes such as transit technology stacks or personnel</li><li>Funding type, which can effect longevity of the service and how well integrated it is with other services managed by the same organization.</li><li>Rider-facing branding, which is often an indicator of one of the above.</li></ul><br>Services MAY:<ul><li>be *reflected by* a `gtfs service data` record</li><li>be *subject to* one or more `rider requirements`</li><li>be *funded by* one or more `funding programs`</li><li>*operated by* one or more `organizations`</li><li>*managed by* one or more organizations</li><li>be *operated in* one or more `place geography`</li><li>*use* one or more `products`. |
| `gtfs datasets`<br><br>*Primary Field*: `gtfs_dataset_id` | Each record represents a gtfs dataset (feed) that is either a type of GTFS Schedule, Trip Updates, Vehicle Locations or Alerts.  A gtfs dataset MAY:<ul><li>be *disaggregated into* one or more `gtfs service data` records.</li><li>be *produced* by one or more `organizations`</li><li>be *published* by an `organizations`. |
| `contracts`<br><br> *Primary Field*: `Name` | Each record is a contract between `organizations` to either provide one or more `products` or operate one or more `services`.  Each contract has propreties such as execution date, expiration, and renewals.  |
| `gtfs service data` <br><br> *Primary Field*: `Name`, a combination of a set of `Services` record(s) and a single `gtfs datasets` record. | Each record links together a single `gtfs dataset` and one (if possible) or more `services`.  Additional fields define how to isolate the service within the `gtfs dataset`.  <br><br>Many services have more than one GTFS dataset which describes their service. Often these are either precursors to *final* datasets (e.g. AC Transit's GTFS dataset is a precursor to the Bay Area 511 dataset) or artifacts produced in other processes such as creating GTFS Realtime (e.g. [the VCTC GTFS produced by GMV](https://airtable.com/appPnJWrQ7ui4UmIl/tblnVt5FZ2FZmDjDx/viw3NtcDP3Qm0BYyG/recJhrNj21mYVETJG?blocks=hide)). The property `Category` indicates if this is the `primary` dataset, a `precursor` or `unknown` in order to distinguish which should be used. |
| `place geography` <br><br> *Primary Field*: `Name` | Each place is a Census recognized Place with a FIPS code.  Additional properties include County and Caltrans District. |
| `fare systems`  <br><br> *Primary Field*: `Fare System` | `WIP` A list of fare systems and their properties. Fare systems apply to one or more Organization which manages a service. |
| `funding programs` <br><br>*Primary Field*: `Program` | `WIP` A very broad list of funding programs for `services` such that we are able to identify which `services` may be subject to various requirements and/or to better classify `services`. |
| `rider requirements` <br><br> *Primary Field*: `Requirement` | A very broad list of rider requirements to categorize and analyze `services`. |
| `eligibility programs` <br><br> *Primary Field*: `Program` | `WIP` Each record is a program/process which riders must use to become eligible to ride one or more `services`.  Each program is operated by an `organization` and evaluates one or more `rider requirements`.  |
| `NTD Agency Info` | 2018 NTD Agency Info Table imported 10/6/2021 from https://www7.fta.dot.gov/ntd/data-product/2018-annual-database-agency-information |
| `API Keys` | Storage of API keys for accessing `gtfs datasets` via a keyed API |

### Transit Services: Entity Relationship Diagram

[![](https://mermaid.ink/img/eyJjb2RlIjoiZXJEaWFncmFtXG4gICAgT3JnYW5pemF0aW9uIH1vLS1veyBTZXJ2aWNlOiBcIm1hbmFnZXNcIlxuICAgIE9yZ2FuaXphdGlvbiB9by0tb3sgU2VydmljZTogXCJvcGVyYXRlc1wiXG4gICAgT3JnYW5pemF0aW9uIH1vLS1veyBDb250cmFjdDogXCJvd25zXCJcbiAgICBPcmdhbml6YXRpb24gfW8tLW97IENvbnRyYWN0OiBcImhvbGRzXCJcbiAgICBPcmdhbml6YXRpb24gfW8tLW97IFByb2R1Y3Q6IFwic2VsbHNcIlxuICAgIE9yZ2FuaXphdGlvbiB9by0tb3sgR3Rmc0RhdGFzZXQ6IFwiY29uc3VtZXNcIlxuICAgIE9yZ2FuaXphdGlvbiB9by0tb3sgR3Rmc0RhdGFzZXQ6IFwicHJvZHVjZXNcIlxuICAgIE9yZ2FuaXphdGlvbiB9by0tb3sgR3Rmc0RhdGFzZXQ6IFwicHVibGlzaGVzXCJcbiAgICBPcmdhbml6YXRpb24gfXwtLW97IENvdW50aWVzOiBcInJlc3BvbnNpYmxlIGZvciByZWdpb25hbCBwbGFubmluZyBpblwiXG5cbiAgICBTZXJ2aWNlIHx8LS18eyBQbGFjZXM6IFwib3BlcmF0ZXMgaW5cIlxuICAgIFBsYWNlcyB9by0tfHsgQ291bnRpZXM6IFwiYXJlIGNvbnRhaW5lZCBpblwiXG4gICAgQ291bnRpZXMgfW8tLXx7IENhbHRyYW5zRGlzdHJpY3RzOiBcImFyZSBjb250YWluZWQgaW5cIlxuXG4gICAgRmFyZVN5c3RlbSB8fC0tfHsgT3JnYW5pemF0aW9uOiBcImFwcGxpZXMgdG9cIlxuXG4gICAgRnVuZGluZ1Byb2dyYW0gfXwtLXx7IFNlcnZpY2U6IFwiZnVuZHNcIlxuICAgIFJpZGVyUmVxdWlyZW1lbnQgfW8tLW97IFNlcnZpY2U6IFwiYXBwbGllcyB0b1wiXG4gICAgRWxpZ2libGl0eVByb2dyYW0gfW8tLW97IFNlcnZpY2U6IFwibGljZW5zZXMgZWxpZ2liaWxpdHkgZm9yXCJcblxuICAgIFNlcnZpY2UgfW8tLW97IEd0ZnNEYXRhc2V0U2VydmljZUNvbXBvbmVudDogXCJyZWZsZWN0ZWQgYnlcIlxuICAgIFNlcnZpY2UgfW8tLW97IEd0ZnNEYXRhc2V0OiBcInJlZmxlY3RlZCBieVwiXG4gICAgR3Rmc0RhdGFzZXRTZXJ2aWNlQ29tcG9uZW50IH1vLS1veyBHdGZzRGF0YXNldDogXCJhZ2dyZWdhdGVkIHRvXCIiLCJtZXJtYWlkIjp7InRoZW1lIjoiZGFyayJ9LCJ1cGRhdGVFZGl0b3IiOmZhbHNlLCJhdXRvU3luYyI6dHJ1ZSwidXBkYXRlRGlhZ3JhbSI6ZmFsc2V9)](https://mermaid-js.github.io/mermaid-live-editor/edit/#eyJjb2RlIjoiZXJEaWFncmFtXG4gICAgT3JnYW5pemF0aW9uIH1vLS1veyBTZXJ2aWNlOiBcIm1hbmFnZXNcIlxuICAgIE9yZ2FuaXphdGlvbiB9by0tb3sgU2VydmljZTogXCJvcGVyYXRlc1wiXG4gICAgT3JnYW5pemF0aW9uIH1vLS1veyBDb250cmFjdDogXCJvd25zXCJcbiAgICBPcmdhbml6YXRpb24gfW8tLW97IENvbnRyYWN0OiBcImhvbGRzXCJcbiAgICBPcmdhbml6YXRpb24gfW8tLW97IFByb2R1Y3Q6IFwic2VsbHNcIlxuICAgIE9yZ2FuaXphdGlvbiB9by0tb3sgR3Rmc0RhdGFzZXQ6IFwiY29uc3VtZXNcIlxuICAgIE9yZ2FuaXphdGlvbiB9by0tb3sgR3Rmc0RhdGFzZXQ6IFwicHJvZHVjZXNcIlxuICAgIE9yZ2FuaXphdGlvbiB9by0tb3sgR3Rmc0RhdGFzZXQ6IFwicHVibGlzaGVzXCJcbiAgICBPcmdhbml6YXRpb24gfXwtLW97IENvdW50aWVzOiBcInJlc3BvbnNpYmxlIGZvciByZWdpb25hbCBwbGFubmluZyBpblwiXG5cbiAgICBTZXJ2aWNlIHx8LS18eyBQbGFjZXM6IFwib3BlcmF0ZXMgaW5cIlxuICAgIFBsYWNlcyB9by0tfHsgQ291bnRpZXM6IFwiYXJlIGNvbnRhaW5lZCBpblwiXG4gICAgQ291bnRpZXMgfW8tLXx7IENhbHRyYW5zRGlzdHJpY3RzOiBcImFyZSBjb250YWluZWQgaW5cIlxuXG4gICAgRmFyZVN5c3RlbSB8fC0tfHsgT3JnYW5pemF0aW9uOiBcImFwcGxpZXMgdG9cIlxuXG4gICAgRnVuZGluZ1Byb2dyYW0gfXwtLXx7IFNlcnZpY2U6IFwiZnVuZHNcIlxuICAgIFJpZGVyUmVxdWlyZW1lbnQgfW8tLW97IFNlcnZpY2U6IFwiYXBwbGllcyB0b1wiXG4gICAgRWxpZ2libGl0eVByb2dyYW0gfW8tLW97IFNlcnZpY2U6IFwibGljZW5zZXMgZWxpZ2liaWxpdHkgZm9yXCJcblxuICAgIFNlcnZpY2UgfW8tLW97IEd0ZnNEYXRhc2V0U2VydmljZUNvbXBvbmVudDogXCJyZWZsZWN0ZWQgYnlcIlxuICAgIFNlcnZpY2UgfW8tLW97IEd0ZnNEYXRhc2V0OiBcInJlZmxlY3RlZCBieVwiXG4gICAgR3Rmc0RhdGFzZXRTZXJ2aWNlQ29tcG9uZW50IH1vLS1veyBHdGZzRGF0YXNldDogXCJhZ2dyZWdhdGVkIHRvXCIiLCJtZXJtYWlkIjoie1xuICBcInRoZW1lXCI6IFwiZGFya1wiXG59IiwidXBkYXRlRWRpdG9yIjpmYWxzZSwiYXV0b1N5bmMiOnRydWUsInVwZGF0ZURpYWdyYW0iOmZhbHNlfQ)

## Transit Data Assessment Tables

| **Name**<br>*Key(s)*| **Description** |
| :------------- |  :-------------- |
| `gtfs checks` | Each record represents a check that can be performed on either a(n):<ul><li>`organization` (who manages a transit service)</li><li>`gtfs dataset` as a whole, or </li><li>a `gtfs service data` record within that `gtfs dataset`. Each check has a score type of either:<ul><li>`Boolean`: yes or no</li><li>`Nominal`: with defined scores for specific criteria levels as defined in the `Scoring Criteria` field, or</li><li>`Continuous`: as defined by the `Scoring Criteria` column and the `Max Score` field.</li></ul>Further, scores for each check can be sourced by one of <ul><li>`human`: manual work</li><li>`auto`: programmable</li><li>`gtfs-trained-human`: a huma with necessary technical training, or </li><li>`combo`: of these.</li></ul>These sources are indicated in their current, near-future, and goal states in the columns `Source`, `Source: medium-term`, and `Source: goal`. |
| `gtfs-service check data` | `WIP` Each record is a specific assessment of a single `gtfs checks` for a single `gtfs service data` record at a specific point in time. |
| `gtfs-dataset check data` | `WIP` Each record is a specific assessment of a single `gtfs checks` for a single `gtfs dataset` record at a specific point in time. |
| `provider check data` | `WIP` Each record is a specific assessment of a single `gtfs checks` for a single `organizations` which *manages* one or more `services` at a specific point in time. |
| `gtfs grading scheme` | `WIP` Each record is a specific check that can be done on a `gtfs service data` for a specific GTFS Grading Scheme version. Scoring for the check should be based on the field `Scoring Criteria`. |
| `gtfs grades` | `WIP` Each record is a specific assessment of a single datapoint within a `gtfs service data` for a specific `gtfs grading scheme` check at a specific point in time. The `Score` field is backed up by `comments supporting score` and `gtfs dataset text`, `official reference` and `official reference attach.` (for screen shots) so that identified issues can be more easily remedied by transit providers.  |
| `provider gtfs assessments` | `WIP` Each record is an aggregated assessment for a single `organizations` which manages one or more `services` conducted using a specific set of `gtfs checks` at a specific point in time. Each record has a `Reviewer`, `Status`, and a link to the document sent to the `organizations` (if applicable) |
| `data improvement strategy` | `WIP` Each record is a single data improvement strategy for a single `Organizations` which responds to a single `provider gtfs assessments`.  Fields includes links to the documents, `Status`, and dates. |

### Transit Data Assessments: Entity Relationship Diagram

[![](https://mermaid.ink/img/eyJjb2RlIjoiZXJEaWFncmFtXG4gICAgT3JnYW5pemF0aW9uIH1vLS1veyBTZXJ2aWNlOiBtYW5hZ2VzIFxuICAgIE9yZ2FuaXphdGlvbiB9by0tb3sgR3Rmc0RhdGFzZXQ6IHByb2R1Y2VzXG4gICAgT3JnYW5pemF0aW9uIH1vLS1veyBHdGZzRGF0YXNldDogcHVibGlzaGVzXG5cbiAgICBHdGZzQXNzZXNzbWVudFByb3ZpZGVyQ2hlY2tEYXRhIH1vLS1vfCBHdGZzQXNzZXNzbWVudENoZWNrczogXCJ1c2VzIGNyaXRlcmlhIGZyb20gYVwiXG4gICAgR3Rmc0Fzc2Vzc21lbnREYXRhc2V0Q2hlY2tEYXRhIH1vLS1vfCBHdGZzQXNzZXNzbWVudENoZWNrczogXCJ1c2VzIGNyaXRlcmlhIGZyb20gYVwiXG4gICAgR3Rmc0Fzc2Vzc21lbnREYXRhc2V0U2VydmljZUNoZWNrRGF0YSB9by0tb3wgR3Rmc0Fzc2Vzc21lbnRDaGVja3M6IFwidXNlcyBjcml0ZXJpYSBmcm9tIGFcIlxuXG4gICAgR3Rmc0Fzc2Vzc21lbnRQcm92aWRlckNoZWNrRGF0YSB9fC0tfHsgT3JnYW5pemF0aW9uOiBcImV2YWx1YXRlcyBhdCBhIHBvaW50IGluIHRpbWVcIlxuICAgIEd0ZnNBc3Nlc3NtZW50RGF0YXNldENoZWNrRGF0YSB9by0tfHsgR3Rmc0RhdGFzZXQ6IGV2YWx1YXRlc1xuICAgIEd0ZnNBc3Nlc3NtZW50RGF0YXNldFNlcnZpY2VDaGVja0RhdGEgfW8tLXx7IEd0ZnNEYXRhc2V0U2VydmljZUNvbXBvbmVudDogZXZhbHVhdGVzXG5cbiAgICBHdGZzQXNzZXNzbWVudFByb3ZpZGVyQ2hlY2tEYXRhIH18LS18eyBHdGZzUHJvdmlkZXJBc3Nlc3NtZW50OiBcImNvbnRhaW5zIGluZm8gZnJvbVwiXG4gICAgR3Rmc0Fzc2Vzc21lbnREYXRhc2V0Q2hlY2tEYXRhIH1vLS18eyBHdGZzUHJvdmlkZXJBc3Nlc3NtZW50OiBcImNvbnRhaW5zIGluZm8gZnJvbVwiXG4gICAgR3Rmc0Fzc2Vzc21lbnREYXRhc2V0U2VydmljZUNoZWNrRGF0YSB9by0tb3sgR3Rmc1Byb3ZpZGVyQXNzZXNzbWVudDogXCJjb250YWlucyBpbmZvIGZyb21cIlxuXG4gICAgR3Rmc0Fzc2Vzc21lbnREYXRhc2V0Q2hlY2tEYXRhIH1vLS18eyBHdGZzRGF0YXNldEFzc2Vzc21lbnQ6IFwiY29udGFpbnMgaW5mbyBmcm9tXCJcbiAgICBHdGZzQXNzZXNzbWVudERhdGFzZXRTZXJ2aWNlQ2hlY2tEYXRhIH1vLS18eyBHdGZzRGF0YXNldEFzc2Vzc21lbnQ6IFwiY29udGFpbnMgaW5mbyBmcm9tXCJcblxuICAgIFNlcnZpY2UgfW8tLW97IEd0ZnNEYXRhc2V0U2VydmljZUNvbXBvbmVudDogXCJyZWZsZWN0ZWQgYnlcIlxuICAgIFNlcnZpY2UgfW8tLW97IEd0ZnNEYXRhc2V0OiBcInJlZmxlY3RlZCBieVwiXG4gICAgR3Rmc0RhdGFzZXRTZXJ2aWNlQ29tcG9uZW50IH1vLS1veyBHdGZzRGF0YXNldDogXCJhZ2dyZWdhdGVkIHRvXCJcbiIsIm1lcm1haWQiOnsidGhlbWUiOiJkYXJrIn0sInVwZGF0ZUVkaXRvciI6ZmFsc2UsImF1dG9TeW5jIjp0cnVlLCJ1cGRhdGVEaWFncmFtIjpmYWxzZX0)](https://mermaid-js.github.io/mermaid-live-editor/edit/#eyJjb2RlIjoiZXJEaWFncmFtXG4gICAgT3JnYW5pemF0aW9uIH1vLS1veyBTZXJ2aWNlOiBtYW5hZ2VzIFxuICAgIE9yZ2FuaXphdGlvbiB9by0tb3sgR3Rmc0RhdGFzZXQ6IHByb2R1Y2VzXG4gICAgT3JnYW5pemF0aW9uIH1vLS1veyBHdGZzRGF0YXNldDogcHVibGlzaGVzXG5cbiAgICBHdGZzQXNzZXNzbWVudFByb3ZpZGVyQ2hlY2tEYXRhIH1vLS1vfCBHdGZzQXNzZXNzbWVudENoZWNrczogXCJ1c2VzIGNyaXRlcmlhIGZyb20gYVwiXG4gICAgR3Rmc0Fzc2Vzc21lbnREYXRhc2V0Q2hlY2tEYXRhIH1vLS1vfCBHdGZzQXNzZXNzbWVudENoZWNrczogXCJ1c2VzIGNyaXRlcmlhIGZyb20gYVwiXG4gICAgR3Rmc0Fzc2Vzc21lbnREYXRhc2V0U2VydmljZUNoZWNrRGF0YSB9by0tb3wgR3Rmc0Fzc2Vzc21lbnRDaGVja3M6IFwidXNlcyBjcml0ZXJpYSBmcm9tIGFcIlxuXG4gICAgR3Rmc0Fzc2Vzc21lbnRQcm92aWRlckNoZWNrRGF0YSB9fC0tfHsgT3JnYW5pemF0aW9uOiBcImV2YWx1YXRlcyBhdCBhIHBvaW50IGluIHRpbWVcIlxuICAgIEd0ZnNBc3Nlc3NtZW50RGF0YXNldENoZWNrRGF0YSB9by0tfHsgR3Rmc0RhdGFzZXQ6IGV2YWx1YXRlc1xuICAgIEd0ZnNBc3Nlc3NtZW50RGF0YXNldFNlcnZpY2VDaGVja0RhdGEgfW8tLXx7IEd0ZnNEYXRhc2V0U2VydmljZUNvbXBvbmVudDogZXZhbHVhdGVzXG5cbiAgICBHdGZzQXNzZXNzbWVudFByb3ZpZGVyQ2hlY2tEYXRhIH18LS18eyBHdGZzUHJvdmlkZXJBc3Nlc3NtZW50OiBcImNvbnRhaW5zIGluZm8gZnJvbVwiXG4gICAgR3Rmc0Fzc2Vzc21lbnREYXRhc2V0Q2hlY2tEYXRhIH1vLS18eyBHdGZzUHJvdmlkZXJBc3Nlc3NtZW50OiBcImNvbnRhaW5zIGluZm8gZnJvbVwiXG4gICAgR3Rmc0Fzc2Vzc21lbnREYXRhc2V0U2VydmljZUNoZWNrRGF0YSB9by0tb3sgR3Rmc1Byb3ZpZGVyQXNzZXNzbWVudDogXCJjb250YWlucyBpbmZvIGZyb21cIlxuXG4gICAgR3Rmc0Fzc2Vzc21lbnREYXRhc2V0Q2hlY2tEYXRhIH1vLS18eyBHdGZzRGF0YXNldEFzc2Vzc21lbnQ6IFwiY29udGFpbnMgaW5mbyBmcm9tXCJcbiAgICBHdGZzQXNzZXNzbWVudERhdGFzZXRTZXJ2aWNlQ2hlY2tEYXRhIH1vLS18eyBHdGZzRGF0YXNldEFzc2Vzc21lbnQ6IFwiY29udGFpbnMgaW5mbyBmcm9tXCJcblxuICAgIFNlcnZpY2UgfW8tLW97IEd0ZnNEYXRhc2V0U2VydmljZUNvbXBvbmVudDogXCJyZWZsZWN0ZWQgYnlcIlxuICAgIFNlcnZpY2UgfW8tLW97IEd0ZnNEYXRhc2V0OiBcInJlZmxlY3RlZCBieVwiXG4gICAgR3Rmc0RhdGFzZXRTZXJ2aWNlQ29tcG9uZW50IH1vLS1veyBHdGZzRGF0YXNldDogXCJhZ2dyZWdhdGVkIHRvXCJcbiIsIm1lcm1haWQiOiJ7XG4gIFwidGhlbWVcIjogXCJkYXJrXCJcbn0iLCJ1cGRhdGVFZGl0b3IiOmZhbHNlLCJhdXRvU3luYyI6dHJ1ZSwidXBkYXRlRGlhZ3JhbSI6ZmFsc2V9)

## Transit Stack Tables

| **Name**<br>*Key(s)*| **Description** |
| :------------- |  :-------------- |
| `organizations` | See above for definition.  Within Transit Stacks context, each organization MAY: <ul><li>*sell* one more `products`</li><li>*own* one or more `contracts` which license the use of one or more `products` to one or more `organizations`.</li><li>*hold* one or more `contracts` with another `organization` to use one or more `products` with a `service` that they *manage* or *operate*.</li><li>*consume* one or more `gtfs datasets`</li><li>*produce* one or more `gtfs datasets`</li><li>*publish* one or more `gtfs datsets`</li><li>*use* one or more `products` as a `organization stack component` for a `service` that they *manage* or *operate*</li></ul>|
| `products`<br><br>  *Primary Field*: `Name` | Each record is a product used in a transit technology stack at another organization (e.g. fixed-route scheduling software) or by riders (e.g. Google Maps).  Products have properties such as input/output capabilities. <br><br>Products MAY:<ul><li>*function as* one or more `stack components` |
| `contracts`<br><br> *Primary Field*: `Name` | `WIP` Each record is a contract between `organizations` to either provide one or more `products` or operate one or more `services`.  Each contract has properties such as execution date, expiration, and renewals.  |
| `stack components` | `WIP` Each component represents a single *lego* in a transit technology stack.  It is part of a single `Component Group` (e.g. CAD/AVL) which are often bundled together, which in turn is part of a `Function Group` (e.g. Fare collection ,scheduling, etc) and is operated in physical space defined in `Location` (e.g. Cloud, Vehicle, etc.) |
| `organization stack components` | `WIP` Each record is an association between one or more `Services`, a `Product`, and one or more `stack components` which that product is serving as.  |
| `organization stack relationships` | `WIP` Each record is an one-way association between two `organization stack components` (`Component A` and `Component B`) using a `data schemas` and `Mechanism` (e.g. `auto-triggered pull`, `intra-product`, `human transaction`, etc.) |
| `data schemas` | Each record indicates a data schema which  can nbe used in one or more `organization stack relationships` |

### Transit Stacks: Entity Relationship Diagram

[![](https://mermaid.ink/img/eyJjb2RlIjoiZXJEaWFncmFtXG4gICAgT3JnYW5pemF0aW9uIH1vLS1veyBTZXJ2aWNlOiBcIm1hbmFnZXNcIlxuICAgIE9yZ2FuaXphdGlvbiB9by0tb3sgU2VydmljZTogXCJvcGVyYXRlc1wiXG4gICAgT3JnYW5pemF0aW9uIH1vLS1veyBDb250cmFjdDogXCJvd25zXCJcbiAgICBPcmdhbml6YXRpb24gfW8tLW97IENvbnRyYWN0OiBcImhvbGRzXCJcbiAgICBPcmdhbml6YXRpb24gfW8tLW97IFByb2R1Y3Q6IFwic2VsbHNcIlxuICAgIE9yZ2FuaXphdGlvbiB9by0tb3sgR3Rmc0RhdGFzZXQ6IFwiY29uc3VtZXNcIlxuICAgIE9yZ2FuaXphdGlvbiB9by0tb3sgR3Rmc0RhdGFzZXQ6IFwicHJvZHVjZXNcIlxuICAgIE9yZ2FuaXphdGlvbiB9by0tb3sgR3Rmc0RhdGFzZXQ6IFwicHVibGlzaGVzXCJcblxuICAgIE9yZ2FuaXphdGlvblN0YWNrQ29tcG9uZW50IH1vLi5veyBPcmdhbml6YXRpb246IFwiYXNzb2NpYXRlc1wiXG4gICAgT3JnYW5pemF0aW9uU3RhY2tDb21wb25lbnQgfW8uLm97IFByb2R1Y3Q6IFwiYXNzb2NpYXRlc1wiXG4gICAgT3JnYW5pemF0aW9uU3RhY2tDb21wb25lbnQgfW8uLm97IENvbXBvbmVudDogXCJhc3NvY2lhdGVzXCJcbiAgICBPcmdhbml6YXRpb25TdGFja0NvbXBvbmVudCB9by4ub3sgQ29udHJhY3Q6IFwiYXNzb2NpYXRlc1wiXG5cbiAgICBPcmdhbml6YXRpb25TdGFja0NvbXBvbmVudFJlbGF0aW9uc2hpcCB9by4ub3sgT3JnYW5pemF0aW9uU3RhY2tDb21wb25lbnQ6IGNvbXBvbmVudEFcbiAgICBPcmdhbml6YXRpb25TdGFja0NvbXBvbmVudFJlbGF0aW9uc2hpcCB9by4ub3sgT3JnYW5pemF0aW9uU3RhY2tDb21wb25lbnQ6IGNvbXBvbmVudEIiLCJtZXJtYWlkIjp7InRoZW1lIjoiZGFyayJ9LCJ1cGRhdGVFZGl0b3IiOmZhbHNlLCJhdXRvU3luYyI6dHJ1ZSwidXBkYXRlRGlhZ3JhbSI6ZmFsc2V9)](https://mermaid-js.github.io/mermaid-live-editor/edit/#eyJjb2RlIjoiZXJEaWFncmFtXG4gICAgT3JnYW5pemF0aW9uIH1vLS1veyBTZXJ2aWNlOiBcIm1hbmFnZXNcIlxuICAgIE9yZ2FuaXphdGlvbiB9by0tb3sgU2VydmljZTogXCJvcGVyYXRlc1wiXG4gICAgT3JnYW5pemF0aW9uIH1vLS1veyBDb250cmFjdDogXCJvd25zXCJcbiAgICBPcmdhbml6YXRpb24gfW8tLW97IENvbnRyYWN0OiBcImhvbGRzXCJcbiAgICBPcmdhbml6YXRpb24gfW8tLW97IFByb2R1Y3Q6IFwic2VsbHNcIlxuICAgIE9yZ2FuaXphdGlvbiB9by0tb3sgR3Rmc0RhdGFzZXQ6IFwiY29uc3VtZXNcIlxuICAgIE9yZ2FuaXphdGlvbiB9by0tb3sgR3Rmc0RhdGFzZXQ6IFwicHJvZHVjZXNcIlxuICAgIE9yZ2FuaXphdGlvbiB9by0tb3sgR3Rmc0RhdGFzZXQ6IFwicHVibGlzaGVzXCJcblxuICAgIE9yZ2FuaXphdGlvblN0YWNrQ29tcG9uZW50IH1vLi5veyBPcmdhbml6YXRpb246IFwiYXNzb2NpYXRlc1wiXG4gICAgT3JnYW5pemF0aW9uU3RhY2tDb21wb25lbnQgfW8uLm97IFByb2R1Y3Q6IFwiYXNzb2NpYXRlc1wiXG4gICAgT3JnYW5pemF0aW9uU3RhY2tDb21wb25lbnQgfW8uLm97IENvbXBvbmVudDogXCJhc3NvY2lhdGVzXCJcbiAgICBPcmdhbml6YXRpb25TdGFja0NvbXBvbmVudCB9by4ub3sgQ29udHJhY3Q6IFwiYXNzb2NpYXRlc1wiXG5cbiAgICBPcmdhbml6YXRpb25TdGFja0NvbXBvbmVudFJlbGF0aW9uc2hpcCB9by4ub3sgT3JnYW5pemF0aW9uU3RhY2tDb21wb25lbnQ6IGNvbXBvbmVudEFcbiAgICBPcmdhbml6YXRpb25TdGFja0NvbXBvbmVudFJlbGF0aW9uc2hpcCB9by4ub3sgT3JnYW5pemF0aW9uU3RhY2tDb21wb25lbnQ6IGNvbXBvbmVudEIiLCJtZXJtYWlkIjoie1xuICBcInRoZW1lXCI6IFwiZGFya1wiXG59IiwidXBkYXRlRWRpdG9yIjpmYWxzZSwiYXV0b1N5bmMiOnRydWUsInVwZGF0ZURpYWdyYW0iOmZhbHNlfQ)

## Dashboards

## Maintenance

### DAGs overview
